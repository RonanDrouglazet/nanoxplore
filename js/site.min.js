"use strict";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}var currentPosition,timeoutPosition,setButtonLineRect=function(a){return $(".header .menu .button-line").css({left:a.left,width:a.width,top:a.top+a.height})},getMenuButtonFromSection=function(a){return $(".header .menu .button[data-menu=\"".concat($(a).data("menu"),"\"]")).get(0)},initMenu=function(){var a=[],b=function(b){return a.find(function(a){return a.target===b})||a.push({target:b})&&b},c=function(){return a.reduce(function(a,b){return!a||b.vheight>a.vheight?b:a})},d=new IntersectionObserver(function(a){a.filter(function(a){return a.isIntersecting}).forEach(function(a){b(a.target).vheight=a.intersectionRect.height,currentPosition=function(){return getMenuButtonFromSection(c().target).getBoundingClientRect()},setButtonLineRect(currentPosition())})},{threshold:Array(100).fill(0).map(function(a,b){return b/100})});document.querySelectorAll("section").forEach(function(a){return d.observe(a)}),d.observe(document.querySelector("footer")),$(".header .menu .button[data-menu]").hover(function(){clearTimeout(timeoutPosition),setButtonLineRect(this.getBoundingClientRect())},function(){timeoutPosition=setTimeout(function(){return setButtonLineRect(currentPosition())},500)}),$(".header .menu .button").click(function(){var a=$("section."+$(this).data("menu"));if(a.length){var b=a.get(0).getBoundingClientRect().top+(document.scrollingElement.scrollTop||document.body.scrollTop)-$(".header").height();[document.scrollingElement,document.body].forEach(function(a){return a.scrollTop=b})}}),$(window).on("resize",function(){clearTimeout(timeoutPosition),timeoutPosition=setTimeout(function(){return setButtonLineRect(currentPosition())},1)})},initMore=function(){$(".learn-more[data-sub], .read-more[data-sub]").each(function(){var a=$(this),b=$(".sub-content."+a.data("sub")),c=parseInt(b.data("padding"),10)||0,d=function(){return Math.max(b.find(".description.active").height(),b.find(".menu").height())+2*c};a.click(function(){var e=b.parent().find(".sub-content.active");e.length&&e.get(0)!=b.get(0)&&(e.css("height",0),e.css("padding-top",0),e.css("padding-bottom",0),e.toggleClass("active"),clearInterval(e.get(0).heightInterval));var f=!!b.height();b.toggleClass("active"),b.css("height",f?0:d()+"px"),b.css("padding-top",f?0:c+"px"),b.css("padding-bottom",f?0:c+"px"),f||window.search||a.get(0).scrollIntoView(),f?clearInterval(b.get(0).heightInterval):b.get(0).heightInterval=setInterval(function(){b.css("height",d()+"px")},1e3)})})},initSub=function(){$(".sub-content").each(function(){var a=$(this),b=0;a.find(".menu button:not(.title)").each(function(b){0===b&&($(this).addClass("active"),$(".description."+$(this).attr("data-menu")).addClass("active")),$(this).attr("data-sabo-clone","onClone"),$(this).attr("data-sabo-remove","onRemove"),$(this).off("click"),$(this).click(function(){var b=a.find(".description."+$(this).data("menu")),c=a.find(".description.active"),d=parseInt(a.data("padding"),10)||0,e=Math.max(b.height(),a.find(".menu").height())+2*d;b!==c&&(c.toggleClass("active","out"),b.toggleClass("active"),a.find(" .menu button.active").toggleClass("active"),$(this).toggleClass("active"),a.css("height",e+"px"))})}),a.find(".arrows i").click(function(){var c=$(this).hasClass("left"),d=a.find(".menu button:not(.title)");c?b--:b++,0>b?b=d.length-1:b==d.length&&(b=0),d[b].click()})})},initNews=function(){var a=$(".news-container"),b=$(".sub-content.news-details .menu button:not(.title)"),c=$(".description.".concat($(b[0]).data("menu"))),d="\n  <div class=\"news big\">\n    <div class=\"image\"><img src=\"".concat($(c.find("img")[0]).attr("src"),"\"></div>\n    <div class=\"description\">\n      <span>").concat($(c.find("h3 span")[0]).html(),"</span>\n      <p>").concat($(c.find("h2")[0]).html(),"</p>\n      <button class=\"read-more\" data-sub=\"news-details\">read more</button>\n    </div>\n  </div>\n  "),e="<div class=\"news\">";b.each(function(a,b){var c=$(".description.".concat($(b).data("menu")));0!=a&&(e+="\n        <div class=\"little\">\n          <div class=\"image\" style=\"background-image: url('".concat($(c.find("img")[0]).attr("src"),"')\"></div>\n          <div class=\"description\">\n            <span>").concat($(c.find("h3 span")[0]).html(),"</span>\n            <p>").concat($(c.find("h2")[0]).html(),"</p>\n          </div>\n        </div>\n      "))}),e+="</div>",1<b.length&&a.append(e),a.append(d)},initForm=function(){$("#contact form").on("submit",function(a){a.preventDefault();var b=$(this),c=b.find(".ui.message"),d=b.find("#submit"),e=b.attr("data-action");return c.removeClass("negative positive"),c.html(""),b.find("input#name").val()&&b.find("input#email").val()&&b.find("input#subject").val()&&b.find("textarea#description").val()?void(d.html("<i class=\"large notched circle loading icon\"></i>"),$.ajax({type:"POST",url:e,data:b.serialize(),//eslint-disable-next-line
success:function success(a){"error"==a.status?(c.html("An error occured, check all fields and don't forget the captcha validation"),c.addClass("negative").fadeIn(500)):(b.trigger("reset"),c.html("Your message has been sent"),c.addClass("positive").fadeIn(500)),d.html("send")}})):(c.html("All fields are required"),void c.addClass("negative").fadeIn(500))})},initMobileMenu=function(){$(".header-mobile .menu").click(function(){return $(".header-mobile .menu-content").toggleClass("active")}),$(".header-mobile .menu-content .button").click(function(){var a=$("section."+$(this).data("menu")).offset().top-$(".header-mobile").height();scrollTo(0,a),$(".header-mobile .menu-content").toggleClass("active")})},textNodes=function(){for(var a,b=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1),c=[];a=b.nextNode();)1<a.textContent.trim().length&&c.push(a);return c}(),higlightText=function(a,b){var c=document.createRange(),d=a.textContent.toLowerCase().indexOf(b.toLowerCase());c.setStart(a,d),c.setEnd(a,d+b.length);var e=window.getSelection();e.removeAllRanges(),e.addRange(c)},initSearchButton=function(){var a=!1,b=1,c="",d=[],f=function(){var a=d[b-1],e=$(a.parentElement).parents(".sub-content"),f=$(a.parentElement).parents(".description").last(),g=!!e.length&&e.offset().top-150<document.scrollingElement.scrollTop,h=!1;if(e.length&&!e.height()){var k=_toConsumableArray(e.get(0).classList).filter(function(a){return"sub-content"!==a})[0];window.search=!0,$("*[data-sub=\"".concat(k,"\"]")).get(0).click(),window.search=!1,h=e}if(f.length){var i=_toConsumableArray(f.get(0).classList).filter(function(a){return!["description","active"].includes(a)})[0],j=$("*[data-menu=\"".concat(i,"\"]"));j.hasClass("active")||(j.click(),h=f)}h&&setTimeout(function(){document.scrollingElement.scrollTo?document.scrollingElement.scrollTo({top:e.offset().top-150,behavior:"instant"}):document.scrollingElement.scrollTop=e.offset().top-150},h?100:0),h?h.one("transitionend",function(){return document.scrollingElement.scrollTop=$(a.parentElement).offset().top-150}):document.scrollingElement.scrollTop=$(a.parentElement).offset().top-150,higlightText(a,c)},g=function(){b>d.length?b=1:!b&&(b=d.length),$("#search-result-number").html("".concat(b,"/").concat(d.length))};$(".header .button.search").click(function(){a?$(".header .search-content").slideUp():$(".header .search-content").slideDown(),a=!a}),$(".header .search-content input").keydown(function(a){13===a.keyCode&&(b=1,c=a.target.value,d=textNodes.filter(function(a){return!!a.textContent.match(new RegExp(c,"i"))}),$("#search-result-number").html("".concat(d.length?1:0,"/").concat(d.length)),f())}),$(".header .search-content i.down").click(function(){b++,g(),f()}),$(".header .search-content i.up").click(function(){b--,g(),f()})};$(window).ready(function(){initMenu(),initMobileMenu(),initNews(),initMore(),initSub(),initForm(),initSearchButton()});var map,salesData,openedInfo,markers=[],mapReady=!1,dataReady=!1;window.initMap=function(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:48.1015541,lng:4.1646157},zoom:4,mapTypeControl:!1}),mapReady=!0,dataReady&&loadMap(salesData)};var loadSales=function(a){$.get("./js/sales.json",function(b){dataReady=!0,salesData=b,mapReady&&a?loadMap(salesData):mapReady&&!a&&centerOn(salesData.Europe)})};loadSales(!0);var centerOn=function(a){markers.forEach(function(a){return a.setMap(null)}),markers=a.adress.map(function(a){var b=new google.maps.Marker(_objectSpread({},a,{map:map}));return b.addListener("click",function(){openedInfo&&openedInfo.close(),openedInfo=new google.maps.InfoWindow({content:"<h3>".concat(a.title,"</h3><div>").concat(a.adress,"</div>")}),openedInfo.open(map,b)}),b}),map.setCenter(a),map.setZoom(a.zoom)},loadMap=function(a){for(var b in a)$(".gmap-container .menu").append("<button data-menu=\""+b+"\">"+b+"<img src=\"assets/img/menu_arrow_white.svg\" class=\"arrow\" /></button>");$(".gmap-container .menu button:not(.title)").click(function(){centerOn(a[$(this).data("menu")]),a[$(this).data("menu")].adress.length?$(".gmap-container .coming").hide():$(".gmap-container .coming").show().css("display","flex")}),centerOn(a.Europe)};window.sabo_plugins=[{name:"G\xE9rer les revendeurs",icon:"mdi-settings",type:"json",json:"js/sales.json",adress:{select:{label:"S\xE9lectionnez une r\xE9gion",items:["Europe","Middle East & Africa","Asia","Latin America","North America"]},textfield:{label:"Nom de l'adresse"}},// eslint-disable-next-line
transformIn:function transformIn(a){var b=[];for(var c in a)b.push({id:c,name:c,children:a[c].adress.map(function(a){return{id:a.adress+a.title,name:a.title}})});return b},// eslint-disable-next-line
getEdited:function getEdited(a,b){var c,d;for(var e in a)c=c||(d=e)&&a[e].adress.find(function(c){return c.adress+c.title===b.id});return{adress:c.adress,textfield:c.title,position:c.position,select:d}},// eslint-disable-next-line
onSave:function onSave(a,b,c){if(!c)a[b.select].adress.push({title:b.textfield,adress:b.adress,position:{lat:b.lat,lng:b.lng}});else{var d=a[c.select].adress.find(function(b){return b.title===c.textfield&&b.adress===c.adress});d.title=b.textfield,d.adress=b.adress,d.position={lat:b.lat,lng:b.lng}}return setTimeout(function(){return loadSales()},1e3),a},// eslint-disable-next-line
onRemove:function onRemove(a,b){for(var c in a)a[c].adress=a[c].adress.filter(function(c){return c.adress+c.title!==b.id});return setTimeout(function(){return loadSales()},1e3),a}},{name:"Ajouter un job",icon:"mdi-account-multiple-plus",type:"selectFile",// eslint-disable-next-line
selectFile:function selectFile(a){var b=document.querySelector(".sub-content.careers");b.offsetHeight||document.querySelector("button[data-sub=\"careers\"]").click(),document.querySelector("button[data-menu=\"jobs\"]").click();var c=document.querySelector(".description.jobs .job.template").cloneNode(!0);return c.classList.remove("template"),c.querySelector("a").href=a,document.querySelector(".job-container:not(.first)").appendChild(c),document.body.parentElement.scrollTop=c.getBoundingClientRect().top,{addedNodes:[c]}},selectFileExtensions:[".pdf"]},{name:"Ajouter une news",icon:"mdi-newspaper",type:"exec",exec:function exec(){return onBeforeClone("news-details")}},{name:"Ajouter un produit (software)",icon:"mdi-microsoft",type:"exec",exec:function exec(){return onBeforeClone("software")}},{name:"Ajouter un produit (hardware)",icon:"mdi-cpu-64-bit",type:"exec",exec:function exec(){return onBeforeClone("fgpa")}}],window.sabo_help=[{name:"Ajouter / Editer sales",type:"video",icon:"mdi-video",video:"/help/ajout_sales.mp4"},{name:"Ajouter / Editer news",type:"video",icon:"mdi-video",video:"/help/ajouter_news.mp4"},{name:"Ajouter / Editer produit",type:"video",icon:"mdi-video",video:"/help/ajouter_produit.mp4"},{name:"Fonction restaurer",type:"video",icon:"mdi-video",video:"/help/fonction_restaurer.mp4"},{name:"Modifier une image",type:"video",icon:"mdi-video",video:"/help/modifier_image.mp4"},{name:"Modifier du texte",type:"video",icon:"mdi-video",video:"/help/modifier_texte.mp4"}];var onBeforeClone=function(a){var b=document.querySelector(".sub-content."+a);b.offsetHeight||document.querySelector("button[data-sub=\"".concat(a,"\"]")).click();//setTimeout(() => sub.scrollIntoView(), 500)
var c=b.querySelector(".menu button:not(.title)"),d=c.cloneNode(!0);return c.parentElement.insertBefore(d,c),document.defaultView.onClone(d,!0)};window.onClone=function(a,b){var c=(Date.now()*Math.random()).toString().replace(".",""),d=a.getAttribute("data-menu");a.innerHTML="Votre titre<img src=\"assets/img/menu_arrow_white.svg\" class=\"arrow\">",a.setAttribute("data-menu",c),a.classList.contains("active")&&(Array.from(a.parentElement.getElementsByClassName("active")).forEach(function(a){return a.classList.remove("active")}),a.classList.add("active"));var e=a.parentElement.parentElement.parentElement,f=b&&e.getElementsByClassName("description template")[0]||e.getElementsByClassName(d)[0],g=f.cloneNode(!0);return g.className="description "+c,f.parentElement.appendChild(g),initSub(),a.click(),{addedNodes:b?[a,g]:[g]}},window.onRemove=function(a){var b=a.parentElement.parentElement.parentElement.getElementsByClassName(a.getAttribute("data-menu"))[0],c=a.parentElement;return setTimeout(function(){c.querySelector(".menu button:not(.title)").click()},100),{removedNodes:[b]}},window.sabo_elements=function(){return[].concat(_toConsumableArray($(".member").get()),_toConsumableArray($(".title-line").get()),_toConsumableArray($(".job").get()))},window.ready=!0;
